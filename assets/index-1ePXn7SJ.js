(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function r(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(n){if(n.ep)return;n.ep=!0;const o=r(n);fetch(n.href,o)}})();const a=document.querySelector(".player"),d=document.querySelector(".photo"),s=d.getContext("2d"),g=document.querySelector(".strip"),h=document.querySelector(".snap"),m=document.querySelector("#take-photo"),y=document.querySelector("#greenscreen"),v=document.querySelector("#redshift"),S=document.querySelector("#glitch");let l=!1,u=!1,f=!1;const L=e=>{for(let t=0;t<e.data.length;t+=4)e.data[t+101]=e.data[t+0],e.data[t-30]=e.data[t+1],e.data[t+50]=e.data[t+2];return e},p=e=>{const t={};document.querySelectorAll(".rgb input").forEach(r=>{t[r.name]=r.value});for(let r=0;r<e.data.length;r+=4){let c=e.data[r+0],n=e.data[r+1],o=e.data[r+2];e.data[r+3],c>=t.rmin&&n>=t.gmin&&o>=t.bmin&&c<=t.rmax&&n<=t.gmax&&o<=t.bmax&&(e.data[r+3]=0)}return e},q=e=>{for(let t=0;t<e.data.length;t+=4)e.data[t+0]=e.data[t+0]+100,e.data[t+1]=e.data[t+1]-50,e.data[t+2]=e.data[t+2]*.5;return e},b=()=>{navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then(e=>{console.log(e),a.srcObject=e,a.play()}).catch(e=>{console.error("uh oh!",e)})},E=()=>{const e=a.videoWidth,t=a.videoHeight;return d.width=e,d.height=t,setInterval(()=>{s.drawImage(a,0,0,e,t);let r=s.getImageData(0,0,e,t);l&&(r=q(r)),u&&(r=p(r)),f&&(r=L(r)),s.putImageData(r,0,0)},16)},O=()=>{h.currentTime=0,h.play();const e=d.toDataURL("image/png"),t=document.createElement("a");t.href=e,t.setAttribute("download","silly"),t.textContent="Download Image",t.innerHTML=`<img src="${e}" alt="Handsome Man">`,g.insertBefore(t,g.firstChild)},w=e=>{u=!u},I=e=>{l=!l},D=e=>{f=!f};b();a.addEventListener("canplay",E);m.addEventListener("click",O);y.addEventListener("click",w);v.addEventListener("click",I);S.addEventListener("click",D);
